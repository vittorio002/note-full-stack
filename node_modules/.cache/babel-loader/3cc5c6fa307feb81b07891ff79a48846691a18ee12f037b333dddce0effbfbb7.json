{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport { db } from \"../firebase\";\nimport { query, collection, onSnapshot } from \"firebase/firestore\";\nconst rootReducer = function () {\n  _s();\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  useEffect(() => {\n    const q = query(collection(db, 'note'));\n    const unsubscribe = onSnapshot(q, querySnapshot => {\n      let initState = [];\n      querySnapshot.forEach(doc => {\n        initState.push({\n          ...doc.data(),\n          id: doc.id\n        });\n      });\n    });\n  });\n  if (action.type == 'CHANGE_STATE') {\n    const newState = state.notes;\n    newState.map(note => {\n      if (note.id == action.id) {\n        note.descrizione = action.change;\n        note.nome = action.nome;\n      }\n    });\n    return {\n      ...state,\n      notes: newState\n    };\n  } else if (action.type == 'ADD_NOTE') {\n    let id = state.notes.length;\n    const newNote = {\n      id: Math.random(),\n      nome: 'new note',\n      descrizione: '.'\n    };\n    const newNotes = [...state.notes, newNote];\n    return {\n      ...state,\n      notes: newNotes\n    };\n  } else if (action.type == 'DELETE_NOTE') {\n    const newState = state.notes.filter(note => note.id != action.id);\n    return {\n      ...state,\n      notes: newState\n    };\n  }\n  return state;\n};\n_s(rootReducer, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\nexport default rootReducer;","map":{"version":3,"names":["useState","useEffect","db","query","collection","onSnapshot","rootReducer","_s","state","arguments","length","undefined","initState","action","q","unsubscribe","querySnapshot","forEach","doc","push","data","id","type","newState","notes","map","note","descrizione","change","nome","newNote","Math","random","newNotes","filter"],"sources":["C:/Users/Vittorio/Desktop/react/note/src/component/rootReducer.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { db } from \"../firebase\";\r\nimport { query, collection, onSnapshot } from \"firebase/firestore\";\r\n\r\n\r\n\r\nconst rootReducer = (state = initState, action)=>{\r\n\r\n  useEffect(()=>{\r\n    const q = query(collection(db, 'note'))\r\n    const unsubscribe = onSnapshot(q, (querySnapshot)=>{\r\n      let initState = []\r\n      querySnapshot.forEach((doc)=>{\r\n        initState.push({...doc.data(), id: doc.id})\r\n      })\r\n    })\r\n  })\r\n\r\n  if(action.type == 'CHANGE_STATE'){\r\n      const newState = state.notes;\r\n      newState.map(note=>{\r\n          if(note.id == action.id){\r\n          note.descrizione = action.change\r\n          note.nome = action.nome\r\n      }})\r\n      return{\r\n          ...state,\r\n         notes: newState\r\n      }\r\n  }else if(action.type == 'ADD_NOTE'){\r\n     let id = state.notes.length\r\n     const newNote = {\r\n      id: Math.random(),\r\n      nome: 'new note',\r\n      descrizione:'.'\r\n     };\r\n     const newNotes =[...state.notes, newNote];\r\n     return{\r\n      ...state,\r\n      notes: newNotes\r\n     }\r\n  }else if(action.type == 'DELETE_NOTE'){\r\n      const newState = state.notes.filter(note=> note.id != action.id)\r\n      return{\r\n          ...state,\r\n          notes : newState\r\n      }\r\n  }\r\n  return state\r\n}\r\n\r\n\r\n\r\nexport default rootReducer;"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,EAAE,QAAQ,aAAa;AAChC,SAASC,KAAK,EAAEC,UAAU,EAAEC,UAAU,QAAQ,oBAAoB;AAIlE,MAAMC,WAAW,GAAG,SAAAA,CAAA,EAA6B;EAAAC,EAAA;EAAA,IAA5BC,KAAK,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAGG,SAAS;EAAA,IAAEC,MAAM,GAAAJ,SAAA,CAAAC,MAAA,OAAAD,SAAA,MAAAE,SAAA;EAE5CV,SAAS,CAAC,MAAI;IACZ,MAAMa,CAAC,GAAGX,KAAK,CAACC,UAAU,CAACF,EAAE,EAAE,MAAM,CAAC,CAAC;IACvC,MAAMa,WAAW,GAAGV,UAAU,CAACS,CAAC,EAAGE,aAAa,IAAG;MACjD,IAAIJ,SAAS,GAAG,EAAE;MAClBI,aAAa,CAACC,OAAO,CAAEC,GAAG,IAAG;QAC3BN,SAAS,CAACO,IAAI,CAAC;UAAC,GAAGD,GAAG,CAACE,IAAI,CAAC,CAAC;UAAEC,EAAE,EAAEH,GAAG,CAACG;QAAE,CAAC,CAAC;MAC7C,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ,CAAC,CAAC;EAEF,IAAGR,MAAM,CAACS,IAAI,IAAI,cAAc,EAAC;IAC7B,MAAMC,QAAQ,GAAGf,KAAK,CAACgB,KAAK;IAC5BD,QAAQ,CAACE,GAAG,CAACC,IAAI,IAAE;MACf,IAAGA,IAAI,CAACL,EAAE,IAAIR,MAAM,CAACQ,EAAE,EAAC;QACxBK,IAAI,CAACC,WAAW,GAAGd,MAAM,CAACe,MAAM;QAChCF,IAAI,CAACG,IAAI,GAAGhB,MAAM,CAACgB,IAAI;MAC3B;IAAC,CAAC,CAAC;IACH,OAAM;MACF,GAAGrB,KAAK;MACTgB,KAAK,EAAED;IACV,CAAC;EACL,CAAC,MAAK,IAAGV,MAAM,CAACS,IAAI,IAAI,UAAU,EAAC;IAChC,IAAID,EAAE,GAAGb,KAAK,CAACgB,KAAK,CAACd,MAAM;IAC3B,MAAMoB,OAAO,GAAG;MACfT,EAAE,EAAEU,IAAI,CAACC,MAAM,CAAC,CAAC;MACjBH,IAAI,EAAE,UAAU;MAChBF,WAAW,EAAC;IACb,CAAC;IACD,MAAMM,QAAQ,GAAE,CAAC,GAAGzB,KAAK,CAACgB,KAAK,EAAEM,OAAO,CAAC;IACzC,OAAM;MACL,GAAGtB,KAAK;MACRgB,KAAK,EAAES;IACR,CAAC;EACJ,CAAC,MAAK,IAAGpB,MAAM,CAACS,IAAI,IAAI,aAAa,EAAC;IAClC,MAAMC,QAAQ,GAAGf,KAAK,CAACgB,KAAK,CAACU,MAAM,CAACR,IAAI,IAAGA,IAAI,CAACL,EAAE,IAAIR,MAAM,CAACQ,EAAE,CAAC;IAChE,OAAM;MACF,GAAGb,KAAK;MACRgB,KAAK,EAAGD;IACZ,CAAC;EACL;EACA,OAAOf,KAAK;AACd,CAAC;AAAAD,EAAA,CA3CKD,WAAW;AA+CjB,eAAeA,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}